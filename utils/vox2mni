#!/usr/bin/env bash

###################################################################
#  ☭  ☭  ☭  ☭  ☭  ☭  ☭  ☭  ☭  ☭  ☭  ☭  ☭  ☭  ☭  ☭  ☭  ☭  ☭  ☭  ☭  #
###################################################################

###################################################################
# Transforms voxelwise coordinates into MNI coordinates
###################################################################

vox=$1
res=1
[[ $# -gt 1 ]] && res=$2

vox_x=$(echo ${vox}|cut -d"," -f1)
vox_y=$(echo ${vox}|cut -d"," -f2)
vox_z=$(echo ${vox}|cut -d"," -f3)

x=$(echo "${vox_x} * ${res}" | bc)
y=$(echo "${vox_y} * ${res}" | bc)
z=$(echo "${vox_z} * ${res}" | bc)

x=$(echo "${x} - 90" | bc)
x=$(echo "${x} * -1" | bc)
y=$(echo "${y} - 126" | bc)
z=$(echo "${z} - 72" | bc)

echo ${x},${y},${z}
