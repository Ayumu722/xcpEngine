#!/usr/bin/env bash

###################################################################
#  ☭  ☭  ☭  ☭  ☭  ☭  ☭  ☭  ☭  ☭  ☭  ☭  ☭  ☭  ☭  ☭  ☭  ☭  ☭  ☭  ☭  #
###################################################################

###################################################################
# Transforms MNI coordinates into voxelwise coordinates
###################################################################

mni=$1
res=1
[[ $# -gt 1 ]] && res=$2

mni_x=$(echo ${mni}|cut -d"," -f1)
mni_y=$(echo ${mni}|cut -d"," -f2)
mni_z=$(echo ${mni}|cut -d"," -f3)

x=$(echo "${mni_x} * -1 + 90" | bc)
y=$(echo "${mni_y} * 1 + 126" | bc)
z=$(echo "${mni_z} * 1 + 72" | bc)


x=$(echo "${x} / ${res}" | bc)
y=$(echo "${y} / ${res}" | bc)
z=$(echo "${z} / ${res}" | bc)


echo ${x},${y},${z}
